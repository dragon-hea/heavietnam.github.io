{"id":2432,"date":"2022-01-31T08:57:05","date_gmt":"2022-01-31T01:57:05","guid":{"rendered":"https:\/\/heavietnam.ga\/?p=2432"},"modified":"2022-04-02T14:31:29","modified_gmt":"2022-04-02T07:31:29","slug":"using-devirtualisemmio","status":"publish","type":"post","link":"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/","title":{"rendered":"Fixing KASLR"},"content":{"rendered":"<div id=\"ez-toc-container\" class=\"ez-toc-v2_0_18 counter-hierarchy counter-decimal\">\n<div class=\"ez-toc-title-container\">\n<p class=\"ez-toc-title\">Danh m\u1ee5c<\/p>\n<span class=\"ez-toc-title-toggle\"><a class=\"ez-toc-pull-right ez-toc-btn ez-toc-btn-xs ez-toc-btn-default ez-toc-toggle\" style=\"display: none;\"><i class=\"ez-toc-glyphicon ez-toc-icon-toggle\"><\/i><\/a><\/span><\/div>\n<nav><ul class=\"ez-toc-list ez-toc-list-level-1\"><li class=\"ez-toc-page-1 ez-toc-heading-level-2\"><a class=\"ez-toc-link ez-toc-heading-1\" href=\"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#KASLR_la_gi\" title=\"KASLR l\u00e0 g\u00ec?\">KASLR l\u00e0 g\u00ec?<\/a><\/li><li class=\"ez-toc-page-1 ez-toc-heading-level-2\"><a class=\"ez-toc-link ez-toc-heading-2\" href=\"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#Vay_khi_nao_can_Fix_KASLR\" title=\"V\u1eady khi n\u00e0o c\u1ea7n Fix KASLR\">V\u1eady khi n\u00e0o c\u1ea7n Fix KASLR<\/a><\/li><li class=\"ez-toc-page-1 ez-toc-heading-level-2\"><a class=\"ez-toc-link ez-toc-heading-3\" href=\"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#Chuan_bi\" title=\"Chu\u1ea9n b\u1ecb:\">Chu\u1ea9n b\u1ecb:<\/a><\/li><li class=\"ez-toc-page-1 ez-toc-heading-level-2\"><a class=\"ez-toc-link ez-toc-heading-4\" href=\"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#Setting_BIOS\" title=\"Setting BIOS\">Setting BIOS<\/a><\/li><li class=\"ez-toc-page-1 ez-toc-heading-level-2\"><a class=\"ez-toc-link ez-toc-heading-5\" href=\"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#Tim_Slide_Value\" title=\"T\u00ecm Slide Value\">T\u00ecm Slide Value<\/a><ul class=\"ez-toc-list-level-3\"><li class=\"ez-toc-heading-level-3\"><a class=\"ez-toc-link ez-toc-heading-6\" href=\"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#Luu_y\" title=\"L\u01b0u \u00fd:\">L\u01b0u \u00fd:<\/a><\/li><\/ul><\/li><li class=\"ez-toc-page-1 ez-toc-heading-level-2\"><a class=\"ez-toc-link ez-toc-heading-7\" href=\"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#Using_DevirtualiseMmio\" title=\"Using DevirtualiseMmio\">Using DevirtualiseMmio<\/a><\/li><\/ul><\/nav><\/div>\n\n<h2><span class=\"ez-toc-section\" id=\"KASLR_la_gi\"><\/span>KASLR l\u00e0 g\u00ec?<span class=\"ez-toc-section-end\"><\/span><\/h2>\n\n\n\n<p>N\u00f3 l\u00e0 vi\u1ebft t\u1eaft c\u1ee7a c\u1ee5m t\u1eeb <strong>Kernel address space layout randomization<\/strong>. N\u00f3 l\u00e0 1 c\u00f4ng c\u1ee5 b\u1ea3o m\u1eadt c\u1ee7a Apple l\u00e0m cho nh\u1eefng Hacker kh\u00f3 c\u00f3 th\u1ec3 t\u00ecm ra nh\u1eefng object quan tr\u1ecdng trong b\u1ed9 nh\u1edb v\u00ec n\u00f3 lu\u00f4n thay \u0111\u1ed5i ng\u1eabu nhi\u00ean sau m\u1ed7i l\u1ea7n kh\u1edfi \u0111\u1ed9ng chi ti\u1ebft xem <a href=\"https:\/\/lwn.net\/Articles\/569635\/\">t\u1ea1i \u0111\u00e2y<\/a>.<\/p>\n\n\n\n<p>\u0110\u1ed1i v\u1edbi nh\u1eefng m\u00e1y c\u00f3 memory maps nh\u1ecf ho\u1eb7c ho\u1eb7c c\u00f3 qu\u00e1 nhi\u1ec1u device trong DSDT. C\u00f3 th\u1ec3 s\u1ebd c\u00f3 space cho kernel ho\u1ea1t \u0111\u1ed9ng nh\u01b0ng c\u0169ng c\u00f3 th\u1ec3 s\u1ebd c\u00f3 free space m\u00e0 kernel kh\u00f4ng bao ph\u1ee7 t\u1edbi. V\u00ec th\u1ebf ta s\u1ebd kh\u00f4ng \u0111\u1ec3 macOS ch\u1ecdn 1 khu v\u1ef1c ng\u1eabu nhi\u00ean \u0111\u1ec3 ho\u1ea1t \u0111\u1ed9ng trong m\u1ed7i l\u1ea7n reboot m\u00e0 ta s\u1ebd gi\u1edbi h\u1ea1n khu v\u1ef1c b\u1ea5t k\u00ec m\u00e0 ch\u1eafc ch\u1eafn n\u00f3 s\u1ebd ho\u1ea1t \u0111\u1ed9ng.<\/p>\n\n\n\n<h2><span class=\"ez-toc-section\" id=\"Vay_khi_nao_can_Fix_KASLR\"><\/span>V\u1eady khi n\u00e0o c\u1ea7n Fix KASLR<span class=\"ez-toc-section-end\"><\/span><\/h2>\n\n\n\n<p>Th\u01b0\u1eddng khi boot macOS s\u1ebd g\u1eb7p c\u00e1c l\u1ed7i nh\u01b0 sau: <\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>Error allocating 0x1197b pages at 0x0000000017a80000 alloc type 2\nCouldn't allocate runtime area\n\n\/\/ho\u1eb7c\n\nOnly 244\/256 slide values are usable!\n\n\/\/ho\u1eb7c\n\npanic(cpu 6 caller 0xffffff801fc057ba): a freed zone element has been modified in zone kalloc.4096: expected 0x3f00116dbe8a46f6 but found 0x3f00116d00000000<\/code><\/pre>\n\n\n\n<h2><span class=\"ez-toc-section\" id=\"Chuan_bi\"><\/span>Chu\u1ea9n b\u1ecb:<span class=\"ez-toc-section-end\"><\/span><\/h2>\n\n\n\n<p>B1: T\u1ea3i OpenRuntime.efi (trong OpenCorePKG xem chi ti\u1ebft <a href=\"https:\/\/heavietnam.ga\/2020\/11\/23\/cach-tao-efi-cho-opencore\/\" data-type=\"post\" data-id=\"1885\">t\u1ea1i \u0111\u00e2y<\/a>).<\/p>\n\n\n\n<p>B2: T\u1ea3i OpenShell.efi (xem c\u00e1ch t\u1ea3i OpenShell <a href=\"https:\/\/heavietnam.ga\/2020\/11\/23\/cach-tao-efi-cho-opencore\/\" data-type=\"post\" data-id=\"1885\">t\u1ea1i \u0111\u00e2y<\/a>).<\/p>\n\n\n\n<p>B3: ch\u1ec9nh config --> Booter theo sau:<\/p>\n\n\n\n<ul><li>AvoidRuntimeDefrag: YES<\/li><li>DevirtualiseMmio: YES<\/li><li>EnableSafeModeSlide: YES<\/li><li>ProtectUefiServices: NO<\/li><li>ProvideCustomSlide: YES<\/li><li>RebuildAppleMemoryMap: YES<\/li><\/ul>\n\n\n\n<h2><span class=\"ez-toc-section\" id=\"Setting_BIOS\"><\/span>Setting BIOS<span class=\"ez-toc-section-end\"><\/span><\/h2>\n\n\n\n<p>B1: Update BIOS (kh\u00e1 quan tr\u1ecdng \u0111\u1eb7c bi\u1ec7t l\u00e0 Z390).<\/p>\n\n\n\n<p>B2: Clear CMOS.<\/p>\n\n\n\n<p>B3: B\u1eadt c\u00e1c option sau trong BIOS:<\/p>\n\n\n\n<ul><li>Above4GDecoding (\u0111\u1ea3m b\u1ea3o r\u1eb1ng Booter -&gt; Quirks -&gt; ResizeAppleGpuBars: 0).<\/li><li>Boot Options -&gt; Windows8.1\/10 mode.<\/li><li>Disable c\u00e1c option kh\u00f4ng c\u1ea7n thi\u1ebft trong bios (kh\u00f4ng c\u1ea7n thi\u1ebft \u1edf \u0111\u00e2y c\u00f3 ngh\u0129a l\u00e0 b\u1ea1n kh\u00f4ng s\u1eed d\u1ee5ng):<ul><li>CSM<\/li><li>Intel SGX<\/li><li>Parallel Port<\/li><li>Serial Port<\/li><li>iGPU<\/li><li>Thunderbolt<\/li><li>LED lighting<\/li><li>Legacy USB<\/li><\/ul><\/li><\/ul>\n\n\n\n<h2><span class=\"ez-toc-section\" id=\"Tim_Slide_Value\"><\/span>T\u00ecm Slide Value<span class=\"ez-toc-section-end\"><\/span><\/h2>\n\n\n\n<p>B1: B\u1ea1n ch\u1ecdn OpenShell.efi t\u1ea1i picker c\u1ee7a OpenCore.<\/p>\n\n\n\n<p>B2: \u1ea4n Enter ho\u1eb7c \u0111\u1ee3i v\u00e0i gi\u00e2y.<\/p>\n\n\n\n<p>B3: C\u00e1c b\u1ea1n g\u00f5 l\u1ec7nh:<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>\/\/truy c\u1eadp v\u00e0o \u1ed5 \u0111\u0129a\n\nfs0:\n\n\/\/ ki\u1ec3m tra xem b\u1ea1n c\u00f3 \u0111ang \u1edf \u0111\u00fang \u0111\u01b0\u1eddng d\u1eabn mong mu\u1ed1n kh\u00f4ng n\u1ebfu kh\u00f4ng c\u00f3 th\u1ec3 th\u1eed fs1:\n\nls\n\n\/\/ t\u1ea1o file memmap.txt\n\nmemmap &gt; memmap.txt<\/code><\/pre>\n\n\n\n<figure class=\"wp-block-image size-large\"><img src=\"https:\/\/i.imgur.com\/uQQPkHc.jpg\" alt=\"\"\/><\/figure>\n\n\n\n<p>B4: M\u1edf file memmap.txt ra ta s\u1ebd \u0111\u01b0\u1ee3c:<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>Type       Start            End              # Pages          Attributes\nBS_Code    0000000000000000-0000000000007FFF 0000000000000008 000000000000000F\nAvailable  0000000000008000-000000000005DFFF 0000000000000056 000000000000000F\nBS_Data    000000000005E000-000000000005FFFF 0000000000000002 000000000000000F\nBS_Code    0000000000060000-000000000009EFFF 000000000000003F 000000000000000F\nRT_Data    000000000009F000-000000000009FFFF 0000000000000001 800000000000000F\nAvailable  0000000000100000-0000000000FFFFFF 0000000000000F00 000000000000000F\nLoaderData 0000000001000000-00000000010FFFFF 0000000000000100 000000000000000F\n<strong>Available<\/strong>  <strong>0000000001100000<\/strong>-000000001FFFFFFF 000000000001EF00 000000000000000F\nReserved   0000000020000000-00000000201FFFFF 0000000000000200 000000000000000F\nAvailable  0000000020200000-0000000040003FFF 000000000001FE04 000000000000000F\nReserved   0000000040004000-0000000040004FFF 0000000000000001 000000000000000F\nAvailable  0000000040005000-00000000CD431FFF 000000000008D42D 000000000000000F\nLoaderCode 00000000CD432000-00000000CD53AFFF 0000000000000109 000000000000000F\nBS_Data    00000000CD53B000-00000000CE025FFF 0000000000000AEB 000000000000000F\nAvailable  00000000CE026000-00000000CE220FFF 00000000000001FB 000000000000000F\nBS_Data    00000000CE221000-00000000CE5C2FFF 00000000000003A2 000000000000000F\nAvailable  00000000CE5C3000-00000000CE5D6FFF 0000000000000014 000000000000000F\nBS_Data    00000000CE5D7000-00000000CE762FFF 000000000000018C 000000000000000F\nLoaderCode 00000000CE763000-00000000CE7EAFFF 0000000000000088 000000000000000F\nBS_Data    00000000CE7EB000-00000000D90E3FFF 000000000000A8F9 000000000000000F\nAvailable  00000000D90E4000-00000000D96C3FFF 00000000000005E0 000000000000000F\nBS_Code    00000000D96C4000-00000000D9762FFF 000000000000009F 000000000000000F\nRT_Code    00000000D9763000-00000000D9767FFF 0000000000000005 800000000000000F\nBS_Code    00000000D9768000-00000000D97C5FFF 000000000000005E 000000000000000F\nACPI_NVS   00000000D97C6000-00000000D9DC6FFF 0000000000000601 000000000000000F\nRT_Code    00000000D9DC7000-00000000D9DC9FFF 0000000000000003 800000000000000F\nBS_Code    00000000D9DCA000-00000000D9DE0FFF 0000000000000017 000000000000000F\nRT_Code    00000000D9DE1000-00000000D9DE6FFF 0000000000000006 800000000000000F\nBS_Code    00000000D9DE7000-00000000D9DE8FFF 0000000000000002 000000000000000F\nRT_Code    00000000D9DE9000-00000000D9DF6FFF 000000000000000E 800000000000000F\nBS_Code    00000000D9DF7000-00000000D9F4DFFF 0000000000000157 000000000000000F\nRT_Code    00000000D9F4E000-00000000D9F51FFF 0000000000000004 800000000000000F\nBS_Code    00000000D9F52000-00000000D9F9CFFF 000000000000004B 000000000000000F\nRT_Code    00000000D9F9D000-00000000D9FA3FFF 0000000000000007 800000000000000F\nRT_Data    00000000D9FA4000-00000000D9FB0FFF 000000000000000D 800000000000000F\nRT_Code    00000000D9FB1000-00000000D9FC2FFF 0000000000000012 800000000000000F\nBS_Code    00000000D9FC3000-00000000D9FC5FFF 0000000000000003 000000000000000F\nRT_Code    00000000D9FC6000-00000000D9FC7FFF 0000000000000002 800000000000000F\nBS_Code    00000000D9FC8000-00000000D9FDEFFF 0000000000000017 000000000000000F\nRT_Code    00000000D9FDF000-00000000D9FE4FFF 0000000000000006 800000000000000F\nBS_Code    00000000D9FE5000-00000000D9FECFFF 0000000000000008 000000000000000F\nRT_Code    00000000D9FED000-00000000D9FEDFFF 0000000000000001 800000000000000F\nBS_Code    00000000D9FEE000-00000000D9FFCFFF 000000000000000F 000000000000000F\nRT_Code    00000000D9FFD000-00000000D9FFDFFF 0000000000000001 800000000000000F\nBS_Code    00000000D9FFE000-00000000DA008FFF 000000000000000B 000000000000000F\nRT_Code    00000000DA009000-00000000DA00DFFF 0000000000000005 800000000000000F\nBS_Code    00000000DA00E000-00000000DA039FFF 000000000000002C 000000000000000F\nRT_Code    00000000DA03A000-00000000DA03AFFF 0000000000000001 800000000000000F\nBS_Code    00000000DA03B000-00000000DA04AFFF 0000000000000010 000000000000000F\nRT_Code    00000000DA04B000-00000000DA070FFF 0000000000000026 800000000000000F\nBS_Code    00000000DA071000-00000000DA083FFF 0000000000000013 000000000000000F\nRT_Code    00000000DA084000-00000000DA084FFF 0000000000000001 800000000000000F\nBS_Code    00000000DA085000-00000000DA085FFF 0000000000000001 000000000000000F\nRT_Code    00000000DA086000-00000000DA087FFF 0000000000000002 800000000000000F\nBS_Code    00000000DA088000-00000000DA088FFF 0000000000000001 000000000000000F\nRT_Code    00000000DA089000-00000000DA08DFFF 0000000000000005 800000000000000F\nBS_Code    00000000DA08E000-00000000DA0A2FFF 0000000000000015 000000000000000F\nRT_Data    00000000DA0A3000-00000000DA102FFF 0000000000000060 800000000000000F\nRT_Code    00000000DA103000-00000000DA11DFFF 000000000000001B 800000000000000F\nRT_Data    00000000DA11E000-00000000DA120FFF 0000000000000003 800000000000000F\nRT_Data    00000000DA121000-00000000DA127FFF 0000000000000007 800000000000000F\nRT_Data    00000000DA128000-00000000DA128FFF 0000000000000001 800000000000000F\nRT_Data    00000000DA129000-00000000DA147FFF 000000000000001F 800000000000000F\nReserved   00000000DA148000-00000000DA4ADFFF 0000000000000366 000000000000000F\nReserved   00000000DA4AE000-00000000DA647FFF 000000000000019A 000000000000000F\nACPI_NVS   00000000DA648000-00000000DA70DFFF 00000000000000C6 000000000000000F\nACPI_NVS   00000000DA70E000-00000000DA8C7FFF 00000000000001BA 000000000000000F\nACPI_Recl  00000000DA8C8000-00000000DA8CCFFF 0000000000000005 000000000000000F\nBS_Data    00000000DA8CD000-00000000DA8CDFFF 0000000000000001 000000000000000F\nACPI_NVS   00000000DA8CE000-00000000DA910FFF 0000000000000043 000000000000000F\nBS_Data    00000000DA911000-00000000DAA5CFFF 000000000000014C 000000000000000F\nBS_Code    00000000DAA5D000-00000000DACF6FFF 000000000000029A 000000000000000F\nBS_Data    00000000DACF7000-00000000DAD06FFF 0000000000000010 000000000000000F\nBS_Code    00000000DAD07000-00000000DAD18FFF 0000000000000012 000000000000000F\nBS_Data    00000000DAD19000-00000000DAD1FFFF 0000000000000007 000000000000000F\nRT_Data    00000000DAD20000-00000000DAFF3FFF 00000000000002D4 800000000000000F\nBS_Data    00000000DAFF4000-00000000DAFFFFFF 000000000000000C 000000000000000F\n<strong>Available<\/strong>  <strong>0000000100000000<\/strong>-000000011F1FFFFF 000000000001F200 000000000000000F\nReserved   00000000DBC00000-00000000DFDFFFFF 0000000000004200 8000000000000000\nMMIO       00000000F8000000-00000000FBFFFFFF 0000000000004000 8000000000000001\nMMIO       00000000FEC00000-00000000FEC00FFF 0000000000000001 8000000000000001\nMMIO       00000000FED00000-00000000FED03FFF 0000000000000004 8000000000000001\nMMIO       00000000FED1C000-00000000FED1FFFF 0000000000000004 8000000000000001\nMMIO       00000000FEE00000-00000000FEE00FFF 0000000000000001 8000000000000001\nMMIO       00000000FF000000-00000000FFFFFFFF 0000000000001000 8000000000000001\n \n  Reserved  :         18,689 Pages (76,550,144 Bytes)\n  LoaderCode:            401 Pages (1,642,496 Bytes)\n  LoaderData:            256 Pages (1,048,576 Bytes)\n  BS_Code   :          1,613 Pages (6,606,848 Bytes)\n  BS_Data   :         47,748 Pages (195,575,808 Bytes)\n  RT_Code   :            146 Pages (598,016 Bytes)\n  RT_Data   :            876 Pages (3,588,096 Bytes)\n  ACPI_Recl :              5 Pages (20,480 Bytes)\n  ACPI_NVS  :          2,244 Pages (9,191,424 Bytes)\n  MMIO      :         20,490 Pages (83,927,040 Bytes)\n  MMIO_Port :              0 Pages (0 Bytes)\n  PalCode   :              0 Pages (0 Bytes)\n  Available :        969,334 Pages (3,970,392,064 Bytes)\n  Persistent:              0 Pages (0 Bytes)\n              -------------- \nTotal Memory:          3,994 MB (4,188,663,808 Bytes)\n<\/code><\/pre>\n\n\n\n<p>B5: B\u00e2y gi\u1edd ta s\u1ebd ti\u1ebfn h\u00e0nh chuy\u1ec3n gi\u00e1 tr\u1ecb th\u00e0nh Slide value ch\u00fa \u00fd v\u00e0o gi\u00e1 tr\u1ecb <code>Available<\/code> l\u1edbn nh\u1ea5t \u1edf c\u1ed9t <code>start<\/code> (chuy\u1ec3n sang decimal \u0111\u1ec3 so s\u00e1nh).<\/p>\n\n\n\n<p>B6: C\u00e1c b\u1ea1n s\u1ebd th\u1ef1c hi\u1ec7n t\u00ednh to\u00e1n theo c\u00f4ng th\u1ee9c (chuy\u1ec3n sang decimal \u0111\u1ec3 t\u00ednh to\u00e1n).<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>(HEX - 0x100000)\/0x200000 = Slide Value in HEX\n\n(DECIMAL - 0x100000)\/0x200000 = Slide Value in decimal\n\n(0000000100000000 - 0x100000)\/0x200000\n\n\/\/ convert hex to decimal \n\n(4294967296 - 1048576)\/2097152 = 2047,5<\/code><\/pre>\n\n\n\n<figure class=\"wp-block-image size-large\"><img src=\"https:\/\/i.imgur.com\/LiarwbH.png\" alt=\"\"\/><\/figure>\n\n\n\n<p>B7: Nh\u01b0ng con s\u1ed1 n\u00e0y qu\u00e1 l\u1edbn (<strong>&gt; 256<\/strong>) v\u00ec v\u1eady ta c\u1ea7n ph\u1ea3i h\u1ea1 xu\u1ed1ng c\u00e1c <code>Available<\/code> c\u00f3 gi\u00e1 tr\u1ecb nh\u1ecf h\u01a1n cho \u0111\u1ebfn khi b\u00e9 h\u01a1n ho\u1eb7c b\u1eb1ng 256.<\/p>\n\n\n\n<p>B8: Ta s\u1ebd th\u1eed v\u1edbi <code>0000000001100000<\/code> covert to decimal: <code>17825792<\/code> ta \u0111\u01b0\u1ee3c k\u1ebft qu\u1ea3 l\u00e0 8.<\/p>\n\n\n\n<p>B9: Add v\u00e0o boot-arg tham s\u1ed1 <code>slide=XXX<\/code> (\u1edf \u0111\u00e2y ta s\u1ebd c\u00f3 l\u00e0 s<code>lide=8<\/code>).<\/p>\n\n\n\n<p>B10: Reboot.<\/p>\n\n\n\n<h3><span class=\"ez-toc-section\" id=\"Luu_y\"><\/span><strong>L\u01b0u \u00fd:<\/strong><span class=\"ez-toc-section-end\"><\/span><\/h3>\n\n\n\n<p> \u1ede 1 s\u1ed1 m\u00e1y s\u1ebd nh\u1eadn \u0111\u01b0\u1ee3c slide value r\u1ea5t nh\u1ecf nh\u01b0 <code>slide=-0.379150390625<\/code> \u0111\u1ed1i v\u1edbi tr\u01b0\u1edfng h\u1ee3p n\u00e0y ta s\u1ebd \u0111\u1eb7t <code>slide=0<\/code>.<\/p>\n\n\n\n<h2><span class=\"ez-toc-section\" id=\"Using_DevirtualiseMmio\"><\/span>Using DevirtualiseMmio<span class=\"ez-toc-section-end\"><\/span><\/h2>\n\n\n\n<p>\u0110\u1ed1i v\u1edbi 1 s\u1ed1 main nh\u01b0 Z390 v\u00e0 h\u1ea7u h\u1ebft d\u00f2ng HEDT ch\u00fang ta c\u1ea7n l\u1eadp 1 danh s\u00e1ch tr\u1eafng. \u0110\u00f3 l\u00e0 l\u00fac MmioWhitelist ph\u00e1t huy t\u00e1c d\u1ee5ng. V\u1edbi <strong>DevirtualiseMmio<\/strong> v\u00e0 <strong>ProvideCustomSlide<\/strong> b\u1ea1n v\u1eeba c\u00f3 th\u1ec3 b\u1ea3o m\u1eadt l\u1ea1i v\u1eeba c\u00f3 th\u1ec3 Boot, 1 combo ho\u00e0n h\u1ea3o.<\/p>\n\n\n\n<p>B1: T\u1ea1o 1 EFI Debug theo h\u01b0\u1edbng d\u1eabn <a href=\"https:\/\/heavietnam.ga\/forum\/topic\/opencore-debugging\/\">t\u1ea1i \u0111\u00e2y<\/a> (nh\u1edb enable <code>DevirtualiseMmio<\/code>).<\/p>\n\n\n\n<ul><li>\u0110\u1ed1i v\u1edbi clover c\u00e1c b\u1ea3n c\u0169ng build t\u01b0\u01a1ng t\u1ef1 (s\u1eed d\u1ee5ng b\u1ea3n clover debug) \u0111\u1ec3 dump \u0111\u01b0\u1ee3c log file c\u00e1c b\u1ea1n s\u1ebd d\u00f9ng hackintool  &#8211;> log <\/li><\/ul>\n\n\n\n<p>B2: B\u1ea1n s\u1ebd nh\u1eadn \u0111\u01b0\u1ee3c 1 file log m\u1edf n\u00f3 ra v\u00e0 ta s\u1ebd c\u00f3:<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>21:495 00:009 OCABC: MMIO devirt start\n<strong>21:499 00:003 OCABC: MMIO devirt 0x60000000 (0x10000 pages, 0x8000000000000001) skip 0\n21:503 00:003 OCABC: MMIO devirt 0xFE000000 (0x11 pages, 0x8000000000000001) skip 0\n21:506 00:003 OCABC: MMIO devirt 0xFEC00000 (0x1 pages, 0x8000000000000001) skip 0\n21:510 00:003 OCABC: MMIO devirt 0xFED00000 (0x1 pages, 0x8000000000000001) skip 0\n21:513 00:003 OCABC: MMIO devirt 0xFEE00000 (0x1 pages, 0x800000000000100D) skip 0\n21:516 00:003 OCABC: MMIO devirt 0xFF000000 (0x1000 pages, 0x800000000000100D) skip 0<\/strong>\n21:520 00:003 OCABC: MMIO devirt end, saved 278608 KB<\/code><\/pre>\n\n\n\n<p>B\u00e2y gi\u1edd ta c\u00f3 6 regions c\u1ea7n th\u00eam v\u00e0o danh s\u00e1ch tr\u1eafng (in \u0111\u1eadm).<\/p>\n\n\n\n<p>Ta c\u1ea7n convert hex to decimal (c\u00f3 th\u1ec3 d\u00f9ng Hackintool).<\/p>\n\n\n\n<ul><li>MMIO devirt 0x60000000 -&gt; 1610612736<\/li><li>MMIO devirt 0xFE000000 -&gt; 4261412864<\/li><li>MMIO devirt 0xFEC00000 -&gt; 4273995776<\/li><li>MMIO devirt 0xFED00000 -&gt; 4275044352<\/li><li>MMIO devirt 0xFEE00000 -&gt; 4276092928<\/li><li>MMIO devirt 0xFF000000 -&gt; 4278190080<\/li><\/ul>\n\n\n\n<figure class=\"wp-block-image size-large\"><img src=\"https:\/\/imgur.com\/4a65sZl.png\" alt=\"\"\/><\/figure>\n\n\n\n<p>B3: Add v\u00e0o config ==&gt; booter ==&gt; MmioWhitelist.<\/p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img src=\"https:\/\/dortania.github.io\/OpenCore-Install-Guide\/assets\/img\/mmio-white.0ee7b5c7.png\" alt=\"\"\/><\/figure>\n\n\n\n<p><strong>Source tham kh\u1ea3o: <a href=\"https:\/\/dortania.github.io\/OpenCore-Install-Guide\/extras\/kaslr-fix.html\">Fixing KASLR slide values | OpenCore Install Guide (dortania.github.io)<\/a><\/strong><\/p>\n","protected":false},"excerpt":{"rendered":"<p>Danh m\u1ee5c KASLR l\u00e0 g\u00ec?V\u1eady khi n\u00e0o c\u1ea7n Fix KASLRChu\u1ea9n b\u1ecb:Setting BIOST\u00ecm Slide ValueL\u01b0u \u00fd:Using DevirtualiseMmio KASLR l\u00e0 g\u00ec? N\u00f3 l\u00e0 vi\u1ebft t\u1eaft c\u1ee7a c\u1ee5m t\u1eeb Kernel address space layout randomization. N\u00f3 l\u00e0 1 c\u00f4ng c\u1ee5 b\u1ea3o m\u1eadt c\u1ee7a Apple l\u00e0m cho nh\u1eefng Hacker kh\u00f3 c\u00f3 th\u1ec3 t\u00ecm ra nh\u1eefng object quan tr\u1ecdng trong b\u1ed9 [&#8230;]\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[49],"tags":[],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v18.4.1 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Fixing KASLR - Heavietnam April 2022<\/title>\n<meta name=\"description\" content=\"n\u01a1i c\u00e1c hackintosher h\u1ed9i t\u1ee5\" \/>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Fixing KASLR - Heavietnam April 2022\" \/>\n<meta property=\"og:description\" content=\"n\u01a1i c\u00e1c hackintosher h\u1ed9i t\u1ee5\" \/>\n<meta property=\"og:url\" content=\"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/\" \/>\n<meta property=\"og:site_name\" content=\"Heavietnam\" \/>\n<meta property=\"article:published_time\" content=\"2022-01-31T01:57:05+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2022-04-02T07:31:29+00:00\" \/>\n<meta property=\"og:image\" content=\"https:\/\/imgur.com\/4a65sZl.png\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:label1\" content=\"Written by\" \/>\n\t<meta name=\"twitter:data1\" content=\"admin\" \/>\n\t<meta name=\"twitter:label2\" content=\"Est. reading time\" \/>\n\t<meta name=\"twitter:data2\" content=\"2 minutes\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"Organization\",\"@id\":\"https:\/\/heavietnam.ga\/#organization\",\"name\":\"heavietnam team\",\"url\":\"https:\/\/heavietnam.ga\/\",\"sameAs\":[],\"logo\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/heavietnam.ga\/#logo\",\"inLanguage\":\"en-US\",\"url\":\"\",\"contentUrl\":\"\",\"caption\":\"heavietnam team\"},\"image\":{\"@id\":\"https:\/\/heavietnam.ga\/#logo\"}},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/heavietnam.ga\/#website\",\"url\":\"https:\/\/heavietnam.ga\/\",\"name\":\"Heavietnam\",\"description\":\"Everythingforhackintosher\",\"publisher\":{\"@id\":\"https:\/\/heavietnam.ga\/#organization\"},\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":{\"@type\":\"EntryPoint\",\"urlTemplate\":\"https:\/\/heavietnam.ga\/?s={search_term_string}\"},\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#primaryimage\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/i.imgur.com\/uQQPkHc.jpg\",\"contentUrl\":\"https:\/\/i.imgur.com\/uQQPkHc.jpg\"},{\"@type\":\"WebPage\",\"@id\":\"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#webpage\",\"url\":\"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/\",\"name\":\"Fixing KASLR - Heavietnam April 2022\",\"isPartOf\":{\"@id\":\"https:\/\/heavietnam.ga\/#website\"},\"primaryImageOfPage\":{\"@id\":\"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#primaryimage\"},\"datePublished\":\"2022-01-31T01:57:05+00:00\",\"dateModified\":\"2022-04-02T07:31:29+00:00\",\"description\":\"n\u01a1i c\u00e1c hackintosher h\u1ed9i t\u1ee5\",\"breadcrumb\":{\"@id\":\"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#breadcrumb\"},\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/\"]}]},{\"@type\":\"BreadcrumbList\",\"@id\":\"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#breadcrumb\",\"itemListElement\":[{\"@type\":\"ListItem\",\"position\":1,\"name\":\"Home\",\"item\":\"https:\/\/heavietnam.ga\/\"},{\"@type\":\"ListItem\",\"position\":2,\"name\":\"Using DevirtualiseMmio\"}]},{\"@type\":\"Article\",\"@id\":\"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#article\",\"isPartOf\":{\"@id\":\"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#webpage\"},\"author\":{\"@id\":\"https:\/\/heavietnam.ga\/#\/schema\/person\/e8b0707792dc7b3ee036862f26b2a0bc\"},\"headline\":\"Fixing KASLR\",\"datePublished\":\"2022-01-31T01:57:05+00:00\",\"dateModified\":\"2022-04-02T07:31:29+00:00\",\"mainEntityOfPage\":{\"@id\":\"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#webpage\"},\"wordCount\":750,\"commentCount\":1,\"publisher\":{\"@id\":\"https:\/\/heavietnam.ga\/#organization\"},\"image\":{\"@id\":\"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#primaryimage\"},\"thumbnailUrl\":\"https:\/\/i.imgur.com\/uQQPkHc.jpg\",\"articleSection\":[\"install hackintosh\"],\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"CommentAction\",\"name\":\"Comment\",\"target\":[\"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#respond\"]}]},{\"@type\":\"Person\",\"@id\":\"https:\/\/heavietnam.ga\/#\/schema\/person\/e8b0707792dc7b3ee036862f26b2a0bc\",\"name\":\"admin\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/heavietnam.ga\/#personlogo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/1419ddfb887a4b128989fe75c3bcdfd5?s=96&r=g\",\"contentUrl\":\"https:\/\/secure.gravatar.com\/avatar\/1419ddfb887a4b128989fe75c3bcdfd5?s=96&r=g\",\"caption\":\"admin\"},\"sameAs\":[\"https:\/\/heavietnam.ga\"],\"url\":\"https:\/\/heavietnam.ga\/author\/admin\/\"}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","yoast_head_json":{"title":"Fixing KASLR - Heavietnam April 2022","description":"n\u01a1i c\u00e1c hackintosher h\u1ed9i t\u1ee5","robots":{"index":"index","follow":"follow","max-snippet":"max-snippet:-1","max-image-preview":"max-image-preview:large","max-video-preview":"max-video-preview:-1"},"canonical":"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/","og_locale":"en_US","og_type":"article","og_title":"Fixing KASLR - Heavietnam April 2022","og_description":"n\u01a1i c\u00e1c hackintosher h\u1ed9i t\u1ee5","og_url":"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/","og_site_name":"Heavietnam","article_published_time":"2022-01-31T01:57:05+00:00","article_modified_time":"2022-04-02T07:31:29+00:00","og_image":[{"url":"https:\/\/imgur.com\/4a65sZl.png"}],"twitter_card":"summary_large_image","twitter_misc":{"Written by":"admin","Est. reading time":"2 minutes"},"schema":{"@context":"https:\/\/schema.org","@graph":[{"@type":"Organization","@id":"https:\/\/heavietnam.ga\/#organization","name":"heavietnam team","url":"https:\/\/heavietnam.ga\/","sameAs":[],"logo":{"@type":"ImageObject","@id":"https:\/\/heavietnam.ga\/#logo","inLanguage":"en-US","url":"","contentUrl":"","caption":"heavietnam team"},"image":{"@id":"https:\/\/heavietnam.ga\/#logo"}},{"@type":"WebSite","@id":"https:\/\/heavietnam.ga\/#website","url":"https:\/\/heavietnam.ga\/","name":"Heavietnam","description":"Everythingforhackintosher","publisher":{"@id":"https:\/\/heavietnam.ga\/#organization"},"potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https:\/\/heavietnam.ga\/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"ImageObject","@id":"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#primaryimage","inLanguage":"en-US","url":"https:\/\/i.imgur.com\/uQQPkHc.jpg","contentUrl":"https:\/\/i.imgur.com\/uQQPkHc.jpg"},{"@type":"WebPage","@id":"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#webpage","url":"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/","name":"Fixing KASLR - Heavietnam April 2022","isPartOf":{"@id":"https:\/\/heavietnam.ga\/#website"},"primaryImageOfPage":{"@id":"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#primaryimage"},"datePublished":"2022-01-31T01:57:05+00:00","dateModified":"2022-04-02T07:31:29+00:00","description":"n\u01a1i c\u00e1c hackintosher h\u1ed9i t\u1ee5","breadcrumb":{"@id":"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/"]}]},{"@type":"BreadcrumbList","@id":"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https:\/\/heavietnam.ga\/"},{"@type":"ListItem","position":2,"name":"Using DevirtualiseMmio"}]},{"@type":"Article","@id":"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#article","isPartOf":{"@id":"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#webpage"},"author":{"@id":"https:\/\/heavietnam.ga\/#\/schema\/person\/e8b0707792dc7b3ee036862f26b2a0bc"},"headline":"Fixing KASLR","datePublished":"2022-01-31T01:57:05+00:00","dateModified":"2022-04-02T07:31:29+00:00","mainEntityOfPage":{"@id":"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#webpage"},"wordCount":750,"commentCount":1,"publisher":{"@id":"https:\/\/heavietnam.ga\/#organization"},"image":{"@id":"https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#primaryimage"},"thumbnailUrl":"https:\/\/i.imgur.com\/uQQPkHc.jpg","articleSection":["install hackintosh"],"inLanguage":"en-US","potentialAction":[{"@type":"CommentAction","name":"Comment","target":["https:\/\/heavietnam.ga\/2022\/01\/31\/using-devirtualisemmio\/#respond"]}]},{"@type":"Person","@id":"https:\/\/heavietnam.ga\/#\/schema\/person\/e8b0707792dc7b3ee036862f26b2a0bc","name":"admin","image":{"@type":"ImageObject","@id":"https:\/\/heavietnam.ga\/#personlogo","inLanguage":"en-US","url":"https:\/\/secure.gravatar.com\/avatar\/1419ddfb887a4b128989fe75c3bcdfd5?s=96&r=g","contentUrl":"https:\/\/secure.gravatar.com\/avatar\/1419ddfb887a4b128989fe75c3bcdfd5?s=96&r=g","caption":"admin"},"sameAs":["https:\/\/heavietnam.ga"],"url":"https:\/\/heavietnam.ga\/author\/admin\/"}]}},"_links":{"self":[{"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/posts\/2432"}],"collection":[{"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/comments?post=2432"}],"version-history":[{"count":6,"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/posts\/2432\/revisions"}],"predecessor-version":[{"id":2876,"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/posts\/2432\/revisions\/2876"}],"wp:attachment":[{"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/media?parent=2432"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/categories?post=2432"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/tags?post=2432"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}