{"id":750,"date":"2021-10-14T23:26:17","date_gmt":"2021-10-14T16:26:17","guid":{"rendered":"https:\/\/heavietnam.ga\/?p=750"},"modified":"2021-10-22T19:16:08","modified_gmt":"2021-10-22T12:16:08","slug":"fix-rtc","status":"publish","type":"post","link":"https:\/\/heavietnam.ga\/2021\/10\/14\/fix-rtc\/","title":{"rendered":"XXXV. Fix rtc"},"content":{"rendered":"<div id=\"ez-toc-container\" class=\"ez-toc-v2_0_17 counter-hierarchy counter-decimal\">\n<div class=\"ez-toc-title-container\">\n<p class=\"ez-toc-title\">Danh m\u1ee5c<\/p>\n<span class=\"ez-toc-title-toggle\"><a class=\"ez-toc-pull-right ez-toc-btn ez-toc-btn-xs ez-toc-btn-default ez-toc-toggle\" style=\"display: none;\"><i class=\"ez-toc-glyphicon ez-toc-icon-toggle\"><\/i><\/a><\/span><\/div>\n<nav><ul class=\"ez-toc-list ez-toc-list-level-1\"><li class=\"ez-toc-page-1 ez-toc-heading-level-2\"><a class=\"ez-toc-link ez-toc-heading-1\" href=\"https:\/\/heavietnam.ga\/2021\/10\/14\/fix-rtc\/#Tim_hieu\" title=\"T\u00ecm hi\u1ec3u \">T\u00ecm hi\u1ec3u <\/a><\/li><li class=\"ez-toc-page-1 ez-toc-heading-level-2\"><a class=\"ez-toc-link ez-toc-heading-2\" href=\"https:\/\/heavietnam.ga\/2021\/10\/14\/fix-rtc\/#Tien_hanh\" title=\"Ti\u1ebfn h\u00e0nh\">Ti\u1ebfn h\u00e0nh<\/a><\/li><li class=\"ez-toc-page-1 ez-toc-heading-level-2\"><a class=\"ez-toc-link ez-toc-heading-3\" href=\"https:\/\/heavietnam.ga\/2021\/10\/14\/fix-rtc\/#General\" title=\"General\">General<\/a><\/li><li class=\"ez-toc-page-1 ez-toc-heading-level-2\"><a class=\"ez-toc-link ez-toc-heading-4\" href=\"https:\/\/heavietnam.ga\/2021\/10\/14\/fix-rtc\/#Opencore\" title=\"Opencore\">Opencore<\/a><ul class=\"ez-toc-list-level-3\"><li class=\"ez-toc-heading-level-3\"><a class=\"ez-toc-link ez-toc-heading-5\" href=\"https:\/\/heavietnam.ga\/2021\/10\/14\/fix-rtc\/#Cach_1_dung_DisableRtcChecksum\" title=\"C\u00e1ch 1: d\u00f9ng  &#8220;DisableRtcChecksum&#8221;\">C\u00e1ch 1: d\u00f9ng  &#8220;DisableRtcChecksum&#8221;<\/a><\/li><\/ul><\/li><li class=\"ez-toc-page-1 ez-toc-heading-level-2\"><a class=\"ez-toc-link ez-toc-heading-6\" href=\"https:\/\/heavietnam.ga\/2021\/10\/14\/fix-rtc\/#Cach_2_Thu_Cong\" title=\"C\u00e1ch 2: Th\u1ee7 C\u00f4ng \">C\u00e1ch 2: Th\u1ee7 C\u00f4ng <\/a><\/li><li class=\"ez-toc-page-1 ez-toc-heading-level-2\"><a class=\"ez-toc-link ez-toc-heading-7\" href=\"https:\/\/heavietnam.ga\/2021\/10\/14\/fix-rtc\/#Clover\" title=\"Clover\">Clover<\/a><\/li><li class=\"ez-toc-page-1 ez-toc-heading-level-2\"><a class=\"ez-toc-link ez-toc-heading-8\" href=\"https:\/\/heavietnam.ga\/2021\/10\/14\/fix-rtc\/#Cach_1\" title=\"C\u00e1ch 1:\">C\u00e1ch 1:<\/a><\/li><li class=\"ez-toc-page-1 ez-toc-heading-level-2\"><a class=\"ez-toc-link ez-toc-heading-9\" href=\"https:\/\/heavietnam.ga\/2021\/10\/14\/fix-rtc\/#Cach_2\" title=\"C\u00e1ch 2:\">C\u00e1ch 2:<\/a><\/li><\/ul><\/nav><\/div>\n\n<h2><span class=\"ez-toc-section\" id=\"Tim_hieu\"><\/span>T\u00ecm hi\u1ec3u <span class=\"ez-toc-section-end\"><\/span><\/h2>\n\n\n\n<p>1 s\u1ed1 d\u00f2ng m\u00e1y khi boot kh\u1edfi \u0111\u1ed9ng s\u1ebd g\u1eb7p t\u00ednh tr\u1ea1ng l\u1ed7i nh\u01b0 h\u00ecnh<\/p>\n\n\n\n<figure class=\"wp-block-image size-full\"><img src=\"https:\/\/heavietnam.ga\/wp-content\/uploads\/2021\/10\/CleanShot-2021-10-14-at-18.34.54.png\" alt=\"\" class=\"wp-image-751\"\/><\/figure>\n\n\n\n<p>Do AppleRTC ghi v\u00e0o m\u1ed9t s\u1ed1 khu v\u1ef1c nh\u1ea5t \u0111\u1ecbnh kh\u00f4ng \u0111\u01b0\u1ee3c ph\u1ea7n c\u1ee9ng h\u1ed7 tr\u1ee3 \u0111\u00fang c\u00e1ch d\u1eabn \u0111\u1ebfn l\u1ed7i <\/p>\n\n\n\n<p>V\u1eady n\u00ean \u0111\u1ec3 fix l\u1ed7i ta s\u1ebd c\u1ea7n \u0111\u01b0a c\u00e1c bad RTC region \u0111\u1ec3 disable c\u00e1c region b\u1ecb l\u1ed7i khi boot <\/p>\n\n\n\n<p>C\u00e1c region n\u1eb1m r\u1ea3i r\u00e1c t\u1eeb 0x00-0x255<\/p>\n\n\n\n<p>V\u1eady t\u1ea1i sao ta ph\u1ea3i t\u00ecm v\u00f9ng l\u1ed7i m\u00e0 kh\u00f4ng disable h\u1ebft t\u1ea5t c\u1ea3 c\u00e1c region. L\u00fd do r\u1ea5t \u0111\u01a1n gi\u1ea3n b\u1edfi v\u00ec khi c\u00f9ng l\u00fac disable h\u00e0ng lo\u1ea1t region, s\u1ebd c\u00f3 1 s\u1ed1 l\u1ed7i do \u0111\u00f3 ra c\u1ea7n thu h\u1eb9p ph\u1ea1m vi region b\u1ecb disable b\u1eb1ng c\u00e1ch t\u00ecm v\u00f9ng l\u1ed7i <\/p>\n\n\n\n<h2><span class=\"ez-toc-section\" id=\"Tien_hanh\"><\/span>Ti\u1ebfn h\u00e0nh<span class=\"ez-toc-section-end\"><\/span><\/h2>\n\n\n\n<h2><span class=\"ez-toc-section\" id=\"General\"><\/span>General<span class=\"ez-toc-section-end\"><\/span><\/h2>\n\n\n\n<p>B1: c\u00e1c b\u1ea1n t\u1ea3i ssdt-time <a href=\"https:\/\/github.com\/corpnewt\/SSDTTime\">t\u1ea1i \u0111\u00e2y<\/a> <\/p>\n\n\n\n<p>B2: c\u00e1c b\u1ea1n dump dsdt theo h\u01b0\u1edbng d\u1eabn <a href=\"https:\/\/heavietnam.ga\/2021\/09\/29\/xxvi-patch-dsdt-phan-1\/\">t\u1ea1i \u0111\u00e2y<\/a> <\/p>\n\n\n\n<p>B3: c\u00e1c b\u1ea1n m\u1edf ssdt-time l\u00ean v\u00e0 nh\u1ea5n &#8220;D&#8221;<\/p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img src=\"https:\/\/imgur.com\/dIWeYYU.png\" alt=\"\"\/><\/figure>\n\n\n\n<p>B4: k\u00e9o dsdt v\u00e0o v\u00e0 nh\u1ea5n enter<\/p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img src=\"https:\/\/imgur.com\/kpMEmK7.png\" alt=\"\"\/><\/figure>\n\n\n\n<p>B5: c\u00e1c b\u1ea1n nh\u1ea5n ph\u00edm &#8220;6&#8221;<\/p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img src=\"https:\/\/imgur.com\/y2MfcCZ.png\" alt=\"\"\/><\/figure>\n\n\n\n<p>B6: C\u00e1c b\u1ea1n b\u1ecf ssdt v\u1eeba dump v\u00e0o EFI -> OC -> ACPI v\u00e0 snaps l\u1ea1i<\/p>\n\n\n\n<h2><span class=\"ez-toc-section\" id=\"Opencore\"><\/span>Opencore<span class=\"ez-toc-section-end\"><\/span><\/h2>\n\n\n\n<h3><span class=\"ez-toc-section\" id=\"Cach_1_dung_DisableRtcChecksum\"><\/span>C\u00e1ch 1: d\u00f9ng  &#8220;DisableRtcChecksum&#8221;<span class=\"ez-toc-section-end\"><\/span><\/h3>\n\n\n\n<figure class=\"wp-block-image size-large\"><img src=\"https:\/\/heavietnam.ga\/wp-content\/uploads\/2021\/10\/CleanShot-2021-10-15-at-10.25.32-1024x741.png\" alt=\"\" class=\"wp-image-756\"\/><\/figure>\n\n\n\n<p>B1: c\u00e1c b\u1ea1n down <a href=\"https:\/\/github.com\/acidanthera\/RTCMemoryFixup\/releases\">rtc memory fixup.kext<\/a> v\u00e0 b\u1ecf v\u00e0o m\u1ee5c EFI ==&gt; OC ==&gt; Sau \u0111\u00f3 snapshot l\u1ea1i <\/p>\n\n\n\n<p>B2: c\u00e1c b\u1ea1n v\u00e0o config m\u1ee5c quirks v\u00e0 b\u1eadt DisableRtcChecksum l\u00ean<\/p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img src=\"https:\/\/heavietnam.ga\/wp-content\/uploads\/2021\/10\/CleanShot-2021-10-15-at-10.25.32-1-1024x741.png\" alt=\"\" class=\"wp-image-757\"\/><\/figure>\n\n\n\n<p><strong>L\u01b0u \u00fd: c\u00e1c n\u00e0y ch\u1ec9 ho\u1ea1t \u0111\u1ed9ng v\u1edbi 1 s\u1ed1 m\u00e1y v\u00ec n\u00f3 ch\u1ec9 disable c\u00e1c region t\u1eeb 0x58-0x59 n\u00ean c\u00e1c m\u00e1y kh\u00f4ng ho\u1ea1t \u0111\u1ed9ng th\u00ec c\u00e1c b\u1ea1n s\u1ebd ti\u1ebfn h\u00e0nh l\u00e0m th\u1ee7 c\u00f4ng<\/strong><\/p>\n\n\n\n<h2><span class=\"ez-toc-section\" id=\"Cach_2_Thu_Cong\"><\/span>C\u00e1ch 2: Th\u1ee7 C\u00f4ng <span class=\"ez-toc-section-end\"><\/span><\/h2>\n\n\n\n<p>B1: c\u00e1c b\u1ea1n ti\u1ebfn h\u00e0nh th\u00eam boot-arg sau v\u00e0o &#8220;rtcfx_exclude=00-FF&#8221; \u0111\u1ec3 check xem c\u00f3 ph\u1ea3i l\u1ed7i do cmos hay kh\u00f4ng<\/p>\n\n\n\n<p>N\u1ebfu boot l\u00ean b\u00ecnh th\u01b0\u1eddng c\u00e1c b\u1ea1n b\u1ea1n ti\u1ebfn h\u00e0nh sang b\u01b0\u1edbc 2 ( gi\u1ea3i th\u00edch nguy\u00ean l\u00fd 1 ch\u00fac nh\u01b0 \u0111\u00e3 n\u00f3i \u1edf tr\u00ean c\u00e1c region r\u00e3i r\u00e1c t\u1eeb  00-255 \u0111\u1ec3 s\u1eed d\u1ee5ng ta chuy\u1ec3n t\u1eeb th\u1eadp ph\u00e2n sang th\u1eadp l\u00fac ph\u00e2n 00-FF )<\/p>\n\n\n\n<p>B2: C\u00e1c b\u1ea1n ti\u1ebfn h\u00e0nh check ti\u1ebfp 0x00-0x7F v\u00e0 0x80-0xFF b\u1eb1ng c\u00e1ch l\u1ea7n l\u01b0\u1ee3t add 2 boot-arg sau v\u00e0o &#8220;rtcfx_exclude=00-7F&#8221; v\u00e0 &#8220;rtcfx_exclude=80-FF&#8221; n\u1ebfu c\u00e1i n\u00e0o boot v\u00e0o \u0111\u01b0\u1ee3c b\u00ecnh th\u01b0\u1eddng th\u00ec b\u1ea1n ch\u1ecdn c\u00e1i \u0111\u00f3 v\u00e0 ti\u1ebfn h\u00e0nh ti\u1ebfp b\u01b0\u1edbc 3 <\/p>\n\n\n\n<p class=\"has-normal-font-size\">B3:C\u00e1c b\u1ea1n ti\u1ebfn h\u00e0nh check ti\u1ebfp nh\u01b0 sau :<\/p>\n\n\n\n<ul><li>B1: chuy\u1ec3n v\u00f9ng region x\u00e1c \u0111\u1ecbnh \u0111\u01b0\u1ee3c \u1edf b\u01b0\u1edbc 2 sang s\u1ed1 th\u1eadp ph\u00e2n sau \u0111\u00f3 c\u00e1c ban ti\u1ebfn h\u00e0nh t\u00ednh trung b\u00ecnh c\u1ed9ng ( v\u00ed d\u1ee5 \u1edf b\u01b0\u1edbc2 m\u00ecnh nh\u1eadn \u0111\u01b0\u1ee3c v\u00f9ng  rtcfx_exclude=00-7F ) th\u00ec ta s\u1ebd l\u00e0m nh\u01b0 sau ( 0+127)\/2=63,5 ( v\u00ed d\u1ee5 n\u00f3 l\u00e0 s\u1ed1 ch\u1eb5n nh\u01b0 64 )<\/li><li>B2: c\u00e1c b\u1ea1n chuy\u1ec3n n\u00f3 sang s\u1ed1 th\u1eadp l\u00fac ph\u00e2n nh\u01b0 sau <\/li><\/ul>\n\n\n\n<p>\u0110\u1ea7u ti\u00ean m\u1edf hackintool l\u00ean v\u00e0o m\u1ee5c calc sau \u0111\u00f3 nh\u1eadp s\u00f4 th\u1eadp l\u00fac ph\u00e2n v\u00e0o \u00f4 hex ho\u1eb7c nh\u1eadp s\u1ed1 th\u1eadp ph\u00e2n v\u00e0o \u00f4 decimal<\/p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img src=\"https:\/\/heavietnam.ga\/wp-content\/uploads\/2021\/10\/CleanShot-2021-10-15-at-12.29.08-1024x583.png\" alt=\"\" class=\"wp-image-761\"\/><\/figure>\n\n\n\n<ul><li>B3: N\u1ebfu ra s\u1ed1 ch\u1eb5n c\u00e1c b\u1ea1n s\u1ebd ti\u1ebfn h\u00e0nh l\u1ea5y nh\u01b0 sau 0x00-0x40\/0x40-0x7F ( n\u1ebfu l\u00e0 s\u1ed1 th\u1eadp ph\u00e2n c\u00e1c b\u1ea1n s\u1ebd ti\u1ebfn h\u00e0nh l\u00e0m trong nh\u01b0 sau vd l\u00e0m tr\u00f2n th\u00e0nh 63 v\u00e0 64 ta c\u00f3 0x00-0x3F\/0x40-0x7F )<\/li><\/ul>\n\n\n\n<p>B4: c\u00e1c b\u1ea1n c\u1ee9 ti\u1ebfp t\u1ee5c nh\u01b0 th\u1ebf cho \u0111\u1ebfn khi t\u00ecm \u0111\u01b0\u1ee3c k\u1ebft qu\u1ea3 cu\u1ed1i c\u00f9ng n\u00f3 c\u00f3 th\u1ec3 l\u00e0 1 v\u00f9ng ho\u1eb7c c\u00f3 th\u1ec3 l\u00e0 1 s\u1ed1 vd nh\u01b0 k\u1ebft qu\u1ea3 cu\u1ed1i c\u00f9ng c\u1ee7a m\u00ecnh s\u1ebd l\u00e0 rtcfx_exclude=55-56 c\u00e1c b\u1ea1n s\u1ebd chuy\u1ec3n n\u00f3 v\u1ec1 d\u1ea1ng th\u1eadp ph\u00e2n l\u00e0 85-86 sau \u0111\u00f3 s\u1ebd add v\u00e0o m\u1ee5c NVRAM -&gt; Add -&gt; 4D1FDA02-38C7-4A6A-9CC6-4BCCA8B30102 -&gt; rtc-blacklist | data | 8586<\/p>\n\n\n\n<p>V\u00e0 \u0111\u1ea3m b\u1ea3o b\u1ea1n c\u00f3 m\u1ee5c sau  Nvram -&gt; Delete -&gt; 4D1FDA02-38C7-4A6A-9CC6-4BCCA8B30102 -&gt; <meta charset=\"utf-8\">rtc-blacklist<\/p>\n\n\n\n<p>Sau khi add xong s\u1ebd \u0111\u01b0\u1ee3c nh\u01b0 h\u00ecnh <\/p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img src=\"https:\/\/heavietnam.ga\/wp-content\/uploads\/2021\/10\/CleanShot-2021-10-15-at-12.40.18-1024x741.png\" alt=\"\" class=\"wp-image-762\"\/><\/figure>\n\n\n\n<p><strong>H\u00e3y L\u01b0u \u00fd r\u1eb1ng \u1edf b\u01b0\u1edbc n\u00e0y b\u1ea1n \u0111\u00e3 x\u00f3a h\u00e0m rtc_exclude trong boot-arg <\/strong><\/p>\n\n\n\n<h2><span class=\"ez-toc-section\" id=\"Clover\"><\/span>Clover<span class=\"ez-toc-section-end\"><\/span><\/h2>\n\n\n\n<h2><span class=\"ez-toc-section\" id=\"Cach_1\"><\/span>C\u00e1ch 1:<span class=\"ez-toc-section-end\"><\/span><\/h2>\n\n\n\n<p>B1: c\u00e1c b\u1ea1n tick v\u00e0o \u00f4 rtc fixup \u1edf m\u1ee5c acpi<\/p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img src=\"https:\/\/imgur.com\/84Khr2P.png\" alt=\"\"\/><\/figure>\n\n\n\n<h2><span class=\"ez-toc-section\" id=\"Cach_2\"><\/span>C\u00e1ch 2:<span class=\"ez-toc-section-end\"><\/span><\/h2>\n\n\n\n<p>B1: c\u00e1c b\u1ea1n l\u00e0m nh\u01b0 tr\u00ean c\u00e1ch 2 \u1edf openore nh\u01b0ng thay v\u00ec v\u00e0o blackplist th\u00ec c\u00e1c b\u1ea1n add th\u1eb3ng v\u00e0o boot-arg<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Danh m\u1ee5c T\u00ecm hi\u1ec3u Ti\u1ebfn h\u00e0nhGeneralOpencoreC\u00e1ch 1: d\u00f9ng &#8220;DisableRtcChecksum&#8221;C\u00e1ch 2: Th\u1ee7 C\u00f4ng CloverC\u00e1ch 1:C\u00e1ch 2: T\u00ecm hi\u1ec3u 1 s\u1ed1 d\u00f2ng m\u00e1y khi boot kh\u1edfi \u0111\u1ed9ng s\u1ebd g\u1eb7p t\u00ednh tr\u1ea1ng l\u1ed7i nh\u01b0 h\u00ecnh Do AppleRTC ghi v\u00e0o m\u1ed9t s\u1ed1 khu v\u1ef1c nh\u1ea5t \u0111\u1ecbnh kh\u00f4ng \u0111\u01b0\u1ee3c ph\u1ea7n c\u1ee9ng h\u1ed7 tr\u1ee3 \u0111\u00fang c\u00e1ch d\u1eabn \u0111\u1ebfn l\u1ed7i V\u1eady n\u00ean [&#8230;]\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[48],"tags":[],"_links":{"self":[{"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/posts\/750"}],"collection":[{"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/comments?post=750"}],"version-history":[{"count":8,"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/posts\/750\/revisions"}],"predecessor-version":[{"id":987,"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/posts\/750\/revisions\/987"}],"wp:attachment":[{"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/media?parent=750"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/categories?post=750"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/tags?post=750"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}