{"id":2378,"date":"2022-01-22T14:04:24","date_gmt":"2022-01-22T07:04:24","guid":{"rendered":"https:\/\/heavietnam.ga\/?p=2378"},"modified":"2022-02-28T15:31:56","modified_gmt":"2022-02-28T08:31:56","slug":"fix-system-clocks-on-hedt","status":"publish","type":"post","link":"https:\/\/heavietnam.ga\/2022\/01\/22\/fix-system-clocks-on-hedt\/","title":{"rendered":"XXXXII. Fix System Clocks on HEDT"},"content":{"rendered":"<div id=\"ez-toc-container\" class=\"ez-toc-v2_0_17 counter-hierarchy counter-decimal\">\n<div class=\"ez-toc-title-container\">\n<p class=\"ez-toc-title\">Danh m\u1ee5c<\/p>\n<span class=\"ez-toc-title-toggle\"><a class=\"ez-toc-pull-right ez-toc-btn ez-toc-btn-xs ez-toc-btn-default ez-toc-toggle\" style=\"display: none;\"><i class=\"ez-toc-glyphicon ez-toc-icon-toggle\"><\/i><\/a><\/span><\/div>\n<nav><ul class=\"ez-toc-list ez-toc-list-level-1\"><li class=\"ez-toc-page-1 ez-toc-heading-level-2\"><a class=\"ez-toc-link ez-toc-heading-1\" href=\"https:\/\/heavietnam.ga\/2022\/01\/22\/fix-system-clocks-on-hedt\/#Chuan_bi\" title=\"Chu\u1ea9n b\u1ecb:\">Chu\u1ea9n b\u1ecb:<\/a><\/li><li class=\"ez-toc-page-1 ez-toc-heading-level-2\"><a class=\"ez-toc-link ez-toc-heading-2\" href=\"https:\/\/heavietnam.ga\/2022\/01\/22\/fix-system-clocks-on-hedt\/#Xac_dinh_van_de\" title=\"X\u00e1c \u0111\u1ecbnh v\u1ea5n \u0111\u1ec1:\">X\u00e1c \u0111\u1ecbnh v\u1ea5n \u0111\u1ec1:<\/a><\/li><li class=\"ez-toc-page-1 ez-toc-heading-level-2\"><a class=\"ez-toc-link ez-toc-heading-3\" href=\"https:\/\/heavietnam.ga\/2022\/01\/22\/fix-system-clocks-on-hedt\/#Tim_ACPI_Path\" title=\"T\u00ecm ACPI Path\">T\u00ecm ACPI Path<\/a><\/li><li class=\"ez-toc-page-1 ez-toc-heading-level-2\"><a class=\"ez-toc-link ez-toc-heading-4\" href=\"https:\/\/heavietnam.ga\/2022\/01\/22\/fix-system-clocks-on-hedt\/#Edit_SSDT\" title=\"Edit SSDT:\">Edit SSDT:<\/a><\/li><\/ul><\/nav><\/div>\n\n<h2><span class=\"ez-toc-section\" id=\"Chuan_bi\"><\/span>Chu\u1ea9n b\u1ecb:<span class=\"ez-toc-section-end\"><\/span><\/h2>\n\n\n\n<ul><li>Dump dsdt theo h\u01b0\u1edbng d\u1eabn <a href=\"https:\/\/heavietnam.ga\/2021\/09\/29\/xxvi-patch-dsdt-phan-1\/\">t\u1ea1i \u0111\u00e2y<\/a><\/li><li><a href=\"https:\/\/github.com\/acidanthera\/MaciASL\/releases\">Maciasl<\/a><\/li><li><a href=\"https:\/\/github.com\/acidanthera\/OpenCorePkg\/blob\/master\/Docs\/AcpiSamples\/Source\/SSDT-RTC0-RANGE.dsl\">SSDT-RTC0-RANGE <\/a><\/li><\/ul>\n\n\n\n<h2><span class=\"ez-toc-section\" id=\"Xac_dinh_van_de\"><\/span>X\u00e1c \u0111\u1ecbnh v\u1ea5n \u0111\u1ec1:<span class=\"ez-toc-section-end\"><\/span><\/h2>\n\n\n\n<p>C\u00e1c b\u1ea1n c\u1ea7n x\u00e1c \u0111\u1ecbnh v\u1ea5n \u0111\u1ec1 c\u1ee7a m\u00ecnh c\u00f3 th\u1eadt s\u1ef1 c\u1ea7n d\u00f9ng ssdt-rtc0 hay kh\u00f4ng <\/p>\n\n\n\n<p>B1: m\u1edf ssdt ra v\u00e0 \u1ea5n t\u1ed5 h\u1ee3p ph\u00edm <code>command + f<\/code> v\u00e0 g\u00f5 t\u1eeb kh\u00f3a <code>PNP0B00<\/code> nh\u00ecn v\u00e0o d\u00f2ng  <code>_CRS<\/code><\/p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img src=\"https:\/\/dortania.github.io\/Getting-Started-With-ACPI\/assets\/img\/rtc-range-check.d964e9c9.png\" alt=\"\"\/><\/figure>\n\n\n\n<p>Ch\u00fang ta c\u00f3 <\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>                Name (_CRS, ResourceTemplate ()  \/\/ _CRS: Current Resource Settings\n                {\n                    IO (Decode16,\n                        0x0070,             \/\/ Range Minimum 1\n                        0x0070,             \/\/ Range Maximum 1\n                        0x01,               \/\/ Alignment 1\n                        0x02,               \/\/ Length 1\n                       )\n                    IO (Decode16,\n                        0x0074,             \/\/ Range Minimum 2\n                        0x0074,             \/\/ Range Maximum 2\n                        0x01,               \/\/ Alignment 2\n                        0x04,               \/\/ Length 2\n                       )\n                    IRQNoFlags ()\n                        {8}\n                })<\/code><\/pre>\n\n\n\n<p>C\u00e1c b\u1ea1n \u0111\u1ec3 \u00fd v\u00e0o c\u00e1c d\u00f2ng <meta charset=\"utf-8\"><code>IRQNoFlags<\/code> ( s\u1ed1 v\u00f9ng bao ph\u1ee7 ) v\u00e0 2 d\u00f2ng <meta charset=\"utf-8\"><code>IO (Decode16,<\/code> ch\u00fang ta c\u00f3 rtc bao ph\u1ee7 8 v\u00f9ng l\u00e0 0x70 (0x007 ch\u00ednh l\u00e0 0x70 do \u0111\u01b0\u1ee3c vi\u1ebft b\u1eb1ng hex), 0x71, 0x72, 0x73, 0x74, 0x75, 0x76, 0x77  ta c\u00f3 <\/p>\n\n\n\n<ul><li>D\u00f2ng io \u0111\u1ea7u ti\u00ean<ul><li>b\u1eaft \u0111\u1ea7u \u1edf 0x70<\/li><li>Bao g\u1ed3m 2 v\u00f9ng<\/li><li>ch\u1ee9a 0x70, 0x71<\/li><\/ul><\/li><li>D\u00f2ng io th\u1ee9 2<ul><li>b\u1eaft \u0111\u1ea7u \u1edf 0x74<\/li><li>Bao g\u1ed3m 4 v\u00f9ng <\/li><li>Ch\u1ee9a 0x74, 0x75, 0x76, 0x77<\/li><\/ul><\/li><\/ul>\n\n\n\n<p>Thi\u1ebfu 0x72 v\u00e0 0x73<\/p>\n\n\n\n<p>Ta c\u1ea7n s\u1eeda ph\u1ea1m vi \u1edf d\u00f2ng io \u0111\u1ea7u ti\u00ean th\u00e0nh 4<\/p>\n\n\n\n<h2><span class=\"ez-toc-section\" id=\"Tim_ACPI_Path\"><\/span>T\u00ecm ACPI Path<span class=\"ez-toc-section-end\"><\/span><\/h2>\n\n\n\n<p>B1: m\u1edf dsdt l\u00ean v\u00e0 \u1ea5n <code>command + f<\/code> <\/p>\n\n\n\n<p>B2: search c\u00e1c t\u1eeb kh\u00f3a sau<\/p>\n\n\n\n<ul><li><code>PNP0B00<\/code> : d\u00f9ng \u0111\u1ec3 t\u00ecm t\u00ean c\u1ee7a device rtc<\/li><li><code>Name (_ADR, 0x001F0000)<\/code>: d\u00f9ng \u0111\u1ec3 t\u00ecm LPC path (LowPinCount path)<\/li><li><code>PNP0A08<\/code>: d\u00f9ng \u0111\u1ec3 t\u00ecm PCI path (c\u00f3 th\u1ec3 c\u00f3 nhi\u1ec1u k\u1ebft qu\u1ea3 c\u00f9ng xu\u1ea5t i\u1ec7n h\u00e3y ch\u1ecdn c\u00e1i \u0111\u1ea7u ti\u00ean)<\/li><\/ul>\n\n\n\n<figure class=\"wp-block-image size-large\"><img src=\"https:\/\/dortania.github.io\/Getting-Started-With-ACPI\/assets\/img\/rtc-name.afa4c3f4.png\" alt=\"\"\/><figcaption>RTC Pathing<\/figcaption><\/figure>\n\n\n\n<figure class=\"wp-block-image size-large\"><img src=\"https:\/\/dortania.github.io\/Getting-Started-With-ACPI\/assets\/img\/lpc.bfa9cf23.png\" alt=\"\"\/><figcaption>LPC Pathing<\/figcaption><\/figure>\n\n\n\n<figure class=\"wp-block-image size-large\"><img src=\"https:\/\/dortania.github.io\/Getting-Started-With-ACPI\/assets\/img\/pci0.4477f361.png\" alt=\"\"\/><figcaption>PCI Pathing<\/figcaption><\/figure>\n\n\n\n<p>B\u00e2y gi\u1edd ch\u00fang ta c\u00f3 c\u00e1c path c\u1ee7a acpi l\u00e0 <code>rtc,lpc,pci0<\/code><\/p>\n\n\n\n<h2><span class=\"ez-toc-section\" id=\"Edit_SSDT\"><\/span>Edit SSDT:<span class=\"ez-toc-section-end\"><\/span><\/h2>\n\n\n\n<p>B1: M\u1edf ssdt-rtc0 v\u1eeba t\u1ea3i \u1edf b\u01b0\u1edbc chu\u1ea9n b\u1ecb l\u00ean v\u00e0 s\u1eeda l\u1ea1i c\u00e1c path nh\u01b0 sau <\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>\/\/Path m\u1eb7c \u0111\u1ecbnh s\u1ebd l\u00e0\n\nPC00.LPC0.RTC\n\n\/\/ch\u00fang ta c\u1ea7n s\u1eeda l\u1ea1i l\u00e0\n\nPCI0.LPC.RTC <\/code><\/pre>\n\n\n\n<p>B2: rename trong ssdt<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>\/\/Tr\u01b0\u1edbc khi rename\n\nExternal (_SB_.PC00.LPC0, DeviceObj) &lt;- Rename \n\nExternal (_SB_.PC00.LPC0.RTC_, DeviceObj) &lt;- Rename \n\nScope (_SB.PC00.LPC0) &lt;- Rename\n\n\/\/Sau khi rename\n\nExternal (_SB_.PCI0.LPC, DeviceObj) &lt;- Renamed\n\nScope (_SB.PCI0.LPC.RTC) &lt;- Renamed\n\nScope (_SB.PCI0.LPC) &lt;- Renamed<\/code><\/pre>\n\n\n\n<p>B3: Ti\u1ebfp theo search <code>device(ACPI000E)<\/code> ( ho\u1eb7c <meta charset=\"utf-8\"><code>ACPI000E<\/code> ) N\u1ebfu DSDT c\u1ee7a b\u1ea1n c\u00f3 d\u00f2ng n\u00e0y th\u00ec <\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>  \/* &lt;- x\u00f3a n\u00f3 trong ssdt\n  Scope (RTC)\n        {\n            Method (_STA, 0, NotSerialized)  \/\/ _STA: Status\n            {\n                If (_OSI (\"Darwin\"))\n                {\n                    Return (Zero)\n                }\n                Else\n                {\n                    Return (0x0F)\n                }\n            }\n        }\n  *\/ &lt;- x\u00f3a n\u00f3 trong ssdt\n\n\/\/ N\u1ebfu kh\u00f4ng c\u00f3 th\u00ec x\u00f3a lu\u00f4n ph\u1ea7n ghi ch\u00fa n\u00e0y trong ssdt<\/code><\/pre>\n\n\n\n<p>B4: ch\u00fang ta c\u00f3 ph\u1ea7n n\u00e0y<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>            Name (_CRS, ResourceTemplate ()  \/\/ _CRS: Current Resource Settings\n            {\n                IO (Decode16,\n                    0x0070,             \/\/ Range Minimum 1\n                    0x0070,             \/\/ Range Maximum 1\n                    0x01,               \/\/ Alignment 1\n                    0x04,               \/\/ Length 1      (Expanded to include 0x72 and 0x73)\n                    )\n                IO (Decode16,\n                    0x0074,             \/\/ Range Minimum 2\n                    0x0074,             \/\/ Range Maximum 2\n                    0x01,               \/\/ Alignment 2\n                    0x04,               \/\/ Length 2\n                    )\n                IRQNoFlags ()\n                    {8}\n            })\n\/\/ S\u1eeda c\u00e1c gi\u00e1 tr\u1ecb theo ph\u00e2n t\u00edch \u1edf b\u01b0\u1edbc x\u00e1c \u0111\u1ecbnh v\u1ea5n \u0111\u1ec1 \u1edf \u0111\u00e2y m\u00ecnh \u0111\u00e3 s\u1eeda d\u00f2ng io \u0111\u1ea7u ti\u00ean c\u00f3 ph\u1ea1m vi gi\u00e1 tr\u1ecb l\u00e0 0x04<\/code><\/pre>\n\n\n\n<figure class=\"wp-block-image size-large\"><img src=\"https:\/\/imgur.com\/oBdHjTa.png\" alt=\"\"\/><\/figure>\n\n\n\n<p>Ch\u00fang ta c\u00f3 <\/p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img src=\"https:\/\/imgur.com\/pHiUOhF.png\" alt=\"\"\/><\/figure>\n\n\n\n<figure class=\"wp-block-image size-large\"><img src=\"https:\/\/imgur.com\/H0oVCx0.png\" alt=\"\"\/><\/figure>\n\n\n\n<figure class=\"wp-block-image size-large\"><img src=\"https:\/\/imgur.com\/id7Wk74.png\" alt=\"\"\/><\/figure>\n\n\n\n<p>B5: save l\u1ea1i d\u01b0\u1edbi d\u1ea1ng file aml theo h\u01b0\u1edbng d\u1eabn <a href=\"https:\/\/heavietnam.ga\/2021\/09\/29\/xxvii-patch-dsdt-phan-2\/\">t\u1ea1i \u0111\u00e2y<\/a><\/p>\n\n\n\n<p>B6: b\u1ecf file SSDT v\u1eeba s\u1eeda v\u00e0o EFI ==&gt; OC ==&gt; ACPI v\u00e0 snaps l\u1ea1i ( ho\u1eb7c EFI ==&gt; Clover ==&gt; ACPI ) sau \u0111\u00f3 restart<\/p>\n\n\n\n<p>L\u01b0u \u00fd: source tham kh\u1ea3o: <a href=\"https:\/\/dortania.github.io\/Getting-Started-With-ACPI\/Universal\/awac-methods\/manual-hedt.html#edits-to-the-sample-ssdt\">Fixing System Clocks on HEDT: Manual | Getting Started With ACPI (dortania.github.io)<\/a> | <a href=\"https:\/\/github.com\/acidanthera\/OpenCorePkg\/blob\/master\/Docs\/AcpiSamples\/Source\/SSDT-RTC0-RANGE.dsl\">OpenCorePkg\/SSDT-RTC0-RANGE.dsl at master \u00b7 acidanthera\/OpenCorePkg (github.com)<\/a><\/p>\n","protected":false},"excerpt":{"rendered":"<p>Danh m\u1ee5c Chu\u1ea9n b\u1ecb:X\u00e1c \u0111\u1ecbnh v\u1ea5n \u0111\u1ec1:T\u00ecm ACPI PathEdit SSDT: Chu\u1ea9n b\u1ecb: Dump dsdt theo h\u01b0\u1edbng d\u1eabn t\u1ea1i \u0111\u00e2y Maciasl SSDT-RTC0-RANGE X\u00e1c \u0111\u1ecbnh v\u1ea5n \u0111\u1ec1: C\u00e1c b\u1ea1n c\u1ea7n x\u00e1c \u0111\u1ecbnh v\u1ea5n \u0111\u1ec1 c\u1ee7a m\u00ecnh c\u00f3 th\u1eadt s\u1ef1 c\u1ea7n d\u00f9ng ssdt-rtc0 hay kh\u00f4ng B1: m\u1edf ssdt ra v\u00e0 \u1ea5n t\u1ed5 h\u1ee3p ph\u00edm command + f v\u00e0 [&#8230;]\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[48],"tags":[],"_links":{"self":[{"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/posts\/2378"}],"collection":[{"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/comments?post=2378"}],"version-history":[{"count":2,"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/posts\/2378\/revisions"}],"predecessor-version":[{"id":2388,"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/posts\/2378\/revisions\/2388"}],"wp:attachment":[{"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/media?parent=2378"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/categories?post=2378"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/heavietnam.ga\/wp-json\/wp\/v2\/tags?post=2378"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}